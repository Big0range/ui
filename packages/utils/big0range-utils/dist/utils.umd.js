(function(Y,W){typeof exports=="object"&&typeof module<"u"?W(exports):typeof define=="function"&&define.amd?define(["exports"],W):(Y=typeof globalThis<"u"?globalThis:Y||self,W(Y.utils={}))})(this,function(Y){"use strict";var Tt=Object.defineProperty;var At=(Y,W,J)=>W in Y?Tt(Y,W,{enumerable:!0,configurable:!0,writable:!0,value:J}):Y[W]=J;var F=(Y,W,J)=>(At(Y,typeof W!="symbol"?W+"":W,J),J);const W=a=>(a.install=e=>{const n=a.name||a.__name;e.component(n,a)},a);let J={},at=Object.getPrototypeOf,ut=J.toString,it=J.hasOwnProperty,ot=it.toString,ct=ot.call(Object);const ht=a=>{let e,n;return!a||ut.call(a)!=="[object Object]"?!1:(e=at(a),e?(n=it.call(e,"constructor")&&e.constructor,typeof n=="function"&&ot.call(n)===ct):!0)},lt={set(a,e){window.localStorage.setItem(a,JSON.stringify(e))},get(a){const e=window.localStorage.getItem(a);return JSON.parse(e)},remove(a){window.localStorage.removeItem(a)},clear(){window.localStorage.clear()}},ft={set(a,e){window.sessionStorage.setItem(a,JSON.stringify(e))},get(a){const e=window.sessionStorage.getItem(a);return JSON.parse(e)},remove(a){window.sessionStorage.removeItem(a)},clear(){window.sessionStorage.clear()}};function dt(a,e="rgba(17, 17, 17, 0.2)"){rt();const n=document.createElement("canvas");n.id="watermark-canvas",document.body.appendChild(n),n.width=165,n.height=95,n.style.display="none";const c=n.getContext("2d");c.rotate(-20*Math.PI/180),c.font="16px Microsoft JhengHei",c.fillStyle=e,c.textAlign="left",c.textBaseline="middle",c.fillText(a,30,105,200);const u=document.createElement("div");u.id="watermark-div",u.style.backgroundImage="url("+n.toDataURL("image/png")+")",u.style.position="fixed",u.style.zIndex="99999999999",u.style.top="0",u.style.bottom="0",u.style.left="0",u.style.right="0",u.style.pointerEvents="none",document.body.appendChild(u),document.body.removeChild(n)}function rt(){document.getElementById("watermark-div")&&document.body.removeChild(document.getElementById("watermark-div"))}const gt={set:dt,clear:rt};function pt(a,e){const n=new FileReader;n.readAsDataURL(a),n.onload=function(c){var S;const u=document.createElement("a");u.download=e,u.href=(S=c.target)==null?void 0:S.result,document.body.appendChild(u),u.click(),document.body.removeChild(u),console.log("123")}}function mt(a,e){const n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){const c=document.createElement("canvas");c.width=n.width,c.height=n.height,c.getContext("2d").drawImage(n,0,0,n.width,n.height);const S=c.toDataURL("image/png"),D=document.createElement("a"),T=new MouseEvent("click");D.download=e,D.href=S,D.dispatchEvent(T)},n.src=a}if(!q)var q={map:function(e,n){var c={};return n?e.map(function(u,S){return c.index=S,n.call(c,u)}):e.slice()},naturalOrder:function(e,n){return e<n?-1:e>n?1:0},sum:function(e,n){var c={};return e.reduce(n?function(u,S,D){return c.index=D,u+n.call(c,S)}:function(u,S){return u+S},0)},max:function(e,n){return Math.max.apply(null,n?q.map(e,n):e)}};var vt=function(){var a=5,e=8-a,n=1e3,c=.75;function u(M,t,i){return(M<<2*a)+(t<<a)+i}function S(M){var t=[],i=!1;function m(){t.sort(M),i=!0}return{push:function(p){t.push(p),i=!1},peek:function(p){return i||m(),p===void 0&&(p=t.length-1),t[p]},pop:function(){return i||m(),t.pop()},size:function(){return t.length},map:function(p){return t.map(p)},debug:function(){return i||m(),t}}}function D(M,t,i,m,w,p,v){var y=this;y.r1=M,y.r2=t,y.g1=i,y.g2=m,y.b1=w,y.b2=p,y.histo=v}D.prototype={volume:function(t){var i=this;return(!i._volume||t)&&(i._volume=(i.r2-i.r1+1)*(i.g2-i.g1+1)*(i.b2-i.b1+1)),i._volume},count:function(t){var i=this,m=i.histo;if(!i._count_set||t){var w=0,p,v,y,x;for(p=i.r1;p<=i.r2;p++)for(v=i.g1;v<=i.g2;v++)for(y=i.b1;y<=i.b2;y++)x=u(p,v,y),w+=m[x]||0;i._count=w,i._count_set=!0}return i._count},copy:function(){var t=this;return new D(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(t){var i=this,m=i.histo;if(!i._avg||t){var w=0,p=1<<8-a,v=0,y=0,x=0,l,$,O,P,C;for($=i.r1;$<=i.r2;$++)for(O=i.g1;O<=i.g2;O++)for(P=i.b1;P<=i.b2;P++)C=u($,O,P),l=m[C]||0,w+=l,v+=l*($+.5)*p,y+=l*(O+.5)*p,x+=l*(P+.5)*p;w?i._avg=[~~(v/w),~~(y/w),~~(x/w)]:i._avg=[~~(p*(i.r1+i.r2+1)/2),~~(p*(i.g1+i.g2+1)/2),~~(p*(i.b1+i.b2+1)/2)]}return i._avg},contains:function(t){var i=this,m=t[0]>>e;return gval=t[1]>>e,bval=t[2]>>e,m>=i.r1&&m<=i.r2&&gval>=i.g1&&gval<=i.g2&&bval>=i.b1&&bval<=i.b2}};function T(){this.vboxes=new S(function(M,t){return q.naturalOrder(M.vbox.count()*M.vbox.volume(),t.vbox.count()*t.vbox.volume())})}T.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var i=this.vboxes,m=0;m<i.size();m++)if(i.peek(m).vbox.contains(t))return i.peek(m).color;return this.nearest(t)},nearest:function(t){for(var i=this.vboxes,m,w,p,v=0;v<i.size();v++)w=Math.sqrt(Math.pow(t[0]-i.peek(v).color[0],2)+Math.pow(t[1]-i.peek(v).color[1],2)+Math.pow(t[2]-i.peek(v).color[2],2)),(w<m||m===void 0)&&(m=w,p=i.peek(v).color);return p},forcebw:function(){var t=this.vboxes;t.sort(function(p,v){return q.naturalOrder(q.sum(p.color),q.sum(v.color))});var i=t[0].color;i[0]<5&&i[1]<5&&i[2]<5&&(t[0].color=[0,0,0]);var m=t.length-1,w=t[m].color;w[0]>251&&w[1]>251&&w[2]>251&&(t[m].color=[255,255,255])}};function k(M){var t=1<<3*a,i=new Array(t),m,w,p,v;return M.forEach(function(y){w=y[0]>>e,p=y[1]>>e,v=y[2]>>e,m=u(w,p,v),i[m]=(i[m]||0)+1}),i}function _(M,t){var i=1e6,m=0,w=1e6,p=0,v=1e6,y=0,x,l,$;return M.forEach(function(O){x=O[0]>>e,l=O[1]>>e,$=O[2]>>e,x<i?i=x:x>m&&(m=x),l<w?w=l:l>p&&(p=l),$<v?v=$:$>y&&(y=$)}),new D(i,m,w,p,v,y,t)}function j(M,t){if(!t.count())return;var i=t.r2-t.r1+1,m=t.g2-t.g1+1,w=t.b2-t.b1+1,p=q.max([i,m,w]);if(t.count()==1)return[t.copy()];var v=0,y=[],x=[],l,$,O,P,C;if(p==i)for(l=t.r1;l<=t.r2;l++){for(P=0,$=t.g1;$<=t.g2;$++)for(O=t.b1;O<=t.b2;O++)C=u(l,$,O),P+=M[C]||0;v+=P,y[l]=v}else if(p==m)for(l=t.g1;l<=t.g2;l++){for(P=0,$=t.r1;$<=t.r2;$++)for(O=t.b1;O<=t.b2;O++)C=u($,l,O),P+=M[C]||0;v+=P,y[l]=v}else for(l=t.b1;l<=t.b2;l++){for(P=0,$=t.r1;$<=t.r2;$++)for(O=t.g1;O<=t.g2;O++)C=u($,O,l),P+=M[C]||0;v+=P,y[l]=v}y.forEach(function(U,N){x[N]=v-U});function b(U){var N=U+"1",f=U+"2",s,o,d,r,h,g=0;for(l=t[N];l<=t[f];l++)if(y[l]>v/2){for(d=t.copy(),r=t.copy(),s=l-t[N],o=t[f]-l,s<=o?h=Math.min(t[f]-1,~~(l+o/2)):h=Math.max(t[N],~~(l-1-s/2));!y[h];)h++;for(g=x[h];!g&&y[h-1];)g=x[--h];return d[f]=h,r[N]=d[f]+1,[d,r]}}return p==i?b("r"):p==m?b("g"):b("b")}function H(M,t){if(!M.length||t<2||t>256)return!1;var i=k(M);i.forEach(function(){});var m=_(M,i),w=new S(function(x,l){return q.naturalOrder(x.count(),l.count())});w.push(m);function p(x,l){for(var $=x.size(),O=0,P;O<n;){if($>=l||O++>n)return;if(P=x.pop(),!P.count()){x.push(P),O++;continue}var C=j(i,P),b=C[0],U=C[1];if(!b)return;x.push(b),U&&(x.push(U),$++)}}p(w,c*t);for(var v=new S(function(x,l){return q.naturalOrder(x.count()*x.volume(),l.count()*l.volume())});w.size();)v.push(w.pop());p(v,t);for(var y=new T;v.size();)y.push(v.pop());return y}return{quantize:H}}(),wt=vt.quantize;function yt(a,e,n){const c=a,u=[];for(let S=0,D,T,k,_,j;S<e;S=S+n)D=S*4,T=c[D+0],k=c[D+1],_=c[D+2],j=c[D+3],(typeof j>"u"||j>=125)&&(T>250&&k>250&&_>250||u.push([T,k,_]));return u}function $t(a){let{colorCount:e,quality:n}=a;if(typeof e>"u"||!Number.isInteger(e))e=10;else{if(e===1)throw new Error("colorCount应该在2到20之间。要获得一种颜色, 调用getColor()而不是getPalette()");e=Math.max(e,2),e=Math.min(e,20)}return(typeof n>"u"||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:e,quality:n}}const st={createPixelArray:yt,validateOptions:$t};function Mt(a){a.setAttribute("crossOrigin","anonymous");const e=document.createElement("canvas"),n=e.getContext("2d"),c=e.width=a.width,u=e.height=a.height;return n.drawImage(a,0,0,c,u),{canvas:e,context:n,width:c,height:u,getImageData:()=>n.getImageData(0,0,c,u)}}function bt(a,e=10){return K(a,5,e)[0]}function K(a,e=8,n=10){a.setAttribute("crossOrigin","anonymous");const c=st.validateOptions({colorCount:e,quality:n}),u=Mt(a),S=u.getImageData(),D=u.width*u.height,T=st.createPixelArray(S.data,D,c.quality),k=wt(T,c.colorCount);return k?k.palette():[]}function St(a,e){return new Promise((n,c)=>{const u=document.createElement("img");u.setAttribute("crossOrigin","anonymous"),u.addEventListener("load",()=>{const S=K(u,5,e),D=S?S[0]:[];n(D)}),u.addEventListener("error",()=>{c()}),u.src=a})}function Dt(a){return new Promise((e,n)=>{let c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="arraybuffer",c.onload=function(){if(this.status==200){let u=new Uint8Array(this.response),S=u.length,D=new Array(S);for(let _=0;_<u.length;_++)D[_]=String.fromCharCode(u[_]);let T=D.join(""),k=window.btoa(T);e("data:image/png;base64,"+k)}},c.onerror=n,c.send()})}const Ct={getPalette:K,getColorFromUrl:St,getImageData:Dt,getColor:bt};var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tt={},xt={get exports(){return tt},set exports(a){tt=a}};(function(a,e){(function(n,c){a.exports=c()})(Ot,function(){var n=1e3,c=6e4,u=36e5,S="millisecond",D="second",T="minute",k="hour",_="day",j="week",H="month",M="quarter",t="year",i="date",m="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(f){var s=["th","st","nd","rd"],o=f%100;return"["+f+(s[(o-20)%10]||s[o]||s[0])+"]"}},y=function(f,s,o){var d=String(f);return!d||d.length>=s?f:""+Array(s+1-d.length).join(o)+f},x={s:y,z:function(f){var s=-f.utcOffset(),o=Math.abs(s),d=Math.floor(o/60),r=o%60;return(s<=0?"+":"-")+y(d,2,"0")+":"+y(r,2,"0")},m:function f(s,o){if(s.date()<o.date())return-f(o,s);var d=12*(o.year()-s.year())+(o.month()-s.month()),r=s.clone().add(d,H),h=o-r<0,g=s.clone().add(d+(h?-1:1),H);return+(-(d+(o-r)/(h?r-g:g-r))||0)},a:function(f){return f<0?Math.ceil(f)||0:Math.floor(f)},p:function(f){return{M:H,y:t,w:j,d:_,D:i,h:k,m:T,s:D,ms:S,Q:M}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(f){return f===void 0}},l="en",$={};$[l]=v;var O=function(f){return f instanceof U},P=function f(s,o,d){var r;if(!s)return l;if(typeof s=="string"){var h=s.toLowerCase();$[h]&&(r=h),o&&($[h]=o,r=h);var g=s.split("-");if(!r&&g.length>1)return f(g[0])}else{var I=s.name;$[I]=s,r=I}return!d&&r&&(l=r),r||!d&&l},C=function(f,s){if(O(f))return f.clone();var o=typeof s=="object"?s:{};return o.date=f,o.args=arguments,new U(o)},b=x;b.l=P,b.i=O,b.w=function(f,s){return C(f,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var U=function(){function f(o){this.$L=P(o.locale,null,!0),this.parse(o)}var s=f.prototype;return s.parse=function(o){this.$d=function(d){var r=d.date,h=d.utc;if(r===null)return new Date(NaN);if(b.u(r))return new Date;if(r instanceof Date)return new Date(r);if(typeof r=="string"&&!/Z$/i.test(r)){var g=r.match(w);if(g){var I=g[2]-1||0,A=(g[7]||"0").substring(0,3);return h?new Date(Date.UTC(g[1],I,g[3]||1,g[4]||0,g[5]||0,g[6]||0,A)):new Date(g[1],I,g[3]||1,g[4]||0,g[5]||0,g[6]||0,A)}}return new Date(r)}(o),this.$x=o.x||{},this.init()},s.init=function(){var o=this.$d;this.$y=o.getFullYear(),this.$M=o.getMonth(),this.$D=o.getDate(),this.$W=o.getDay(),this.$H=o.getHours(),this.$m=o.getMinutes(),this.$s=o.getSeconds(),this.$ms=o.getMilliseconds()},s.$utils=function(){return b},s.isValid=function(){return this.$d.toString()!==m},s.isSame=function(o,d){var r=C(o);return this.startOf(d)<=r&&r<=this.endOf(d)},s.isAfter=function(o,d){return C(o)<this.startOf(d)},s.isBefore=function(o,d){return this.endOf(d)<C(o)},s.$g=function(o,d,r){return b.u(o)?this[d]:this.set(r,o)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(o,d){var r=this,h=!!b.u(d)||d,g=b.p(o),I=function(V,L){var B=b.w(r.$u?Date.UTC(r.$y,L,V):new Date(r.$y,L,V),r);return h?B:B.endOf(_)},A=function(V,L){return b.w(r.toDate()[V].apply(r.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(L)),r)},E=this.$W,z=this.$M,R=this.$D,X="set"+(this.$u?"UTC":"");switch(g){case t:return h?I(1,0):I(31,11);case H:return h?I(1,z):I(0,z+1);case j:var Z=this.$locale().weekStart||0,Q=(E<Z?E+7:E)-Z;return I(h?R-Q:R+(6-Q),z);case _:case i:return A(X+"Hours",0);case k:return A(X+"Minutes",1);case T:return A(X+"Seconds",2);case D:return A(X+"Milliseconds",3);default:return this.clone()}},s.endOf=function(o){return this.startOf(o,!1)},s.$set=function(o,d){var r,h=b.p(o),g="set"+(this.$u?"UTC":""),I=(r={},r[_]=g+"Date",r[i]=g+"Date",r[H]=g+"Month",r[t]=g+"FullYear",r[k]=g+"Hours",r[T]=g+"Minutes",r[D]=g+"Seconds",r[S]=g+"Milliseconds",r)[h],A=h===_?this.$D+(d-this.$W):d;if(h===H||h===t){var E=this.clone().set(i,1);E.$d[I](A),E.init(),this.$d=E.set(i,Math.min(this.$D,E.daysInMonth())).$d}else I&&this.$d[I](A);return this.init(),this},s.set=function(o,d){return this.clone().$set(o,d)},s.get=function(o){return this[b.p(o)]()},s.add=function(o,d){var r,h=this;o=Number(o);var g=b.p(d),I=function(z){var R=C(h);return b.w(R.date(R.date()+Math.round(z*o)),h)};if(g===H)return this.set(H,this.$M+o);if(g===t)return this.set(t,this.$y+o);if(g===_)return I(1);if(g===j)return I(7);var A=(r={},r[T]=c,r[k]=u,r[D]=n,r)[g]||1,E=this.$d.getTime()+o*A;return b.w(E,this)},s.subtract=function(o,d){return this.add(-1*o,d)},s.format=function(o){var d=this,r=this.$locale();if(!this.isValid())return r.invalidDate||m;var h=o||"YYYY-MM-DDTHH:mm:ssZ",g=b.z(this),I=this.$H,A=this.$m,E=this.$M,z=r.weekdays,R=r.months,X=function(L,B,nt,G){return L&&(L[B]||L(d,h))||nt[B].slice(0,G)},Z=function(L){return b.s(I%12||12,L,"0")},Q=r.meridiem||function(L,B,nt){var G=L<12?"AM":"PM";return nt?G.toLowerCase():G},V={YY:String(this.$y).slice(-2),YYYY:this.$y,M:E+1,MM:b.s(E+1,2,"0"),MMM:X(r.monthsShort,E,R,3),MMMM:X(R,E),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:X(r.weekdaysMin,this.$W,z,2),ddd:X(r.weekdaysShort,this.$W,z,3),dddd:z[this.$W],H:String(I),HH:b.s(I,2,"0"),h:Z(1),hh:Z(2),a:Q(I,A,!0),A:Q(I,A,!1),m:String(A),mm:b.s(A,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:g};return h.replace(p,function(L,B){return B||V[L]||g.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(o,d,r){var h,g=b.p(d),I=C(o),A=(I.utcOffset()-this.utcOffset())*c,E=this-I,z=b.m(this,I);return z=(h={},h[t]=z/12,h[H]=z,h[M]=z/3,h[j]=(E-A)/6048e5,h[_]=(E-A)/864e5,h[k]=E/u,h[T]=E/c,h[D]=E/n,h)[g]||E,r?z:b.a(z)},s.daysInMonth=function(){return this.endOf(H).$D},s.$locale=function(){return $[this.$L]},s.locale=function(o,d){if(!o)return this.$L;var r=this.clone(),h=P(o,d,!0);return h&&(r.$L=h),r},s.clone=function(){return b.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},f}(),N=U.prototype;return C.prototype=N,[["$ms",S],["$s",D],["$m",T],["$H",k],["$W",_],["$M",H],["$y",t],["$D",i]].forEach(function(f){N[f[1]]=function(s){return this.$g(s,f[0],f[1])}}),C.extend=function(f,s){return f.$i||(f(s,U,C),f.$i=!0),C},C.locale=P,C.isDayjs=O,C.unix=function(f){return C(1e3*f)},C.en=$[l],C.Ls=$,C.p={},C})})(xt);const et=tt;function It(a,e="YYYY-MM-DD"){const n=new Date(a.getFullYear(),a.getMonth()+1,0);return et(n).format(e)}function _t(a,e="YYYY-MM-DD"){const n=new Date(a.getFullYear(),a.getMonth(),1);return et(n).format(e)}const Pt=Object.freeze(Object.defineProperty({__proto__:null,firstDayOfMonth:_t,lastDayOfMonth:It},Symbol.toStringTag,{value:"Module"})),Yt={width:300,height:150,lineWidth:2,lineColor:"#fff",bgColor:"#000",bgImage:""};class Et{constructor(e,n){F(this,"canvas");F(this,"options",{...Yt});F(this,"ctx");F(this,"stop",!0);F(this,"X",0);F(this,"Y",0);F(this,"points",[]);F(this,"currentPoints",[]);F(this,"currentPoint",{data:[],lineWidth:this.options.lineWidth,lineColor:this.options.lineColor});this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options={...this.options,...n},this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.canvas.style.border="1px solid #ccc",this.ctx.lineCap="round",e.appendChild(this.canvas),this.init()}getThis(){return this}prev(){this.points.length>0&&this.currentPoints.length!==0&&(this.currentPoints=this.points.slice(0,this.currentPoints.length-1),this.draw())}next(){this.points.length>0&&this.currentPoints.length!==this.points.length&&(this.currentPoints=this.points.slice(0,this.currentPoints.length+1),this.draw())}async draw(){console.log("重绘"),this.ctx.clearRect(0,0,this.options.width,this.options.height),await this.init(!0),this.currentPoints.forEach(e=>{this.ctx.lineWidth=e.lineWidth,this.ctx.strokeStyle=e.lineColor,this.ctx.beginPath();for(let n=0;n<e.data.length;n++){const c=e.data[n],u=e.data[n-1];n!==0&&(this.ctx.moveTo(u.x,u.y),this.ctx.lineTo(c.x,c.y))}this.ctx.stroke()})}async init(e){if(this.ctx.fillStyle=this.options.bgColor,this.ctx.fillRect(0,0,this.options.width,this.options.height),this.options.bgImage){let n;typeof this.options.bgImage=="string"?n=await new Promise((T,k)=>{const _=new Image;_.src=this.options.bgImage,_.onload=()=>{console.log(_.width,_.height),T(_)},_.onerror=j=>{k(j)}}):n=this.options.bgImage;const c=this.options.width/n.width,u=this.options.height/n.height;c>u?(n.width=n.width*c,n.height=n.height*c):(n.width=n.width*u,n.height=n.height*u);const S=n.height-this.options.height,D=n.width-this.options.width;console.log(n.width,n.height),this.ctx.drawImage(n,-D/2,-S/2,n.width,n.height)}e||this.bindEvent()}bindEvent(){console.log("bindEvent"),this.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.handleMouseUp.bind(this))}handleMouseDown(e){this.stop=!1,this.ctx.lineWidth=this.options.lineWidth,this.ctx.strokeStyle=this.options.lineColor,this.X=e.offsetX,this.Y=e.offsetY,this.currentPoint={data:[{x:e.offsetX,y:e.offsetY}],lineWidth:this.options.lineWidth,lineColor:this.options.lineColor}}handleMouseMove(e){this.stop||(this.ctx.beginPath(),this.ctx.moveTo(this.X,this.Y),this.X=e.offsetX,this.Y=e.offsetY,this.ctx.lineTo(e.offsetX,e.offsetY),this.ctx.stroke(),this.currentPoint.data.push({x:e.offsetX,y:e.offsetY}))}handleMouseUp(e){console.log("handleMouseUp"),this.stop=!0,this.currentPoints.push(this.currentPoint),this.points=[...this.currentPoints]}setLineColor(e){this.options.lineColor=e}setLineWidth(e){this.options.lineWidth=e}change(e){const n={totalStep:this.points.length,totalPoints:this.points,currentStep:this.currentPoints.length,currentPoints:this.currentPoints[-1]};e(n)}}Y.CanvasSign=Et,Y.ColorThief=Ct,Y.date=Pt,Y.dayjs=et,Y.downloadFile=pt,Y.downloadImg=mt,Y.isObject=ht,Y.localStorage=lt,Y.sessionStorage=ft,Y.waterMark=gt,Y.withInstall=W,Object.defineProperty(Y,Symbol.toStringTag,{value:"Module"})});
